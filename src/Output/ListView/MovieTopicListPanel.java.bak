/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JPanel.java to edit this template
 */
package Output.ListView;

import Data.Genre;
import Data.Movie;
import Output.ListView.ScrollView.Scroll;
import Output.StackView.MovieStackedPanel;
import Repository.SearchMovies;
import java.awt.Color;
import java.awt.Dimension;
import javax.swing.JFrame;

/**
 *
 * @author fes77
 */
public class MovieTopicListPanel extends javax.swing.JPanel {

    /**
     * Creates new form MovieListPanel
     */
    
    
    Movie movie;
    Genre genre;
    String tag;
    String search;
    Scroll type;
    int size;
    
    public MovieTopicListPanel() {
        
//        relatedMoviesScrollPanel.scrollRectToVisible(focused);

//        movie = new Movie(1, "Toy Story");
        type = Scroll.LINEAR;
        initComponents();
        prepareTopic();
    }
    
    public MovieTopicListPanel(Scroll type) {
        
//        relatedMoviesScrollPanel.scrollRectToVisible(focused);

//        movie = new Movie(1, "Toy Story");
        this.type = type;
        initComponents();
        prepareTopic();
    }
    
    public MovieTopicListPanel(Scroll type, int size) {
        
//        relatedMoviesScrollPanel.scrollRectToVisible(focused);

//        movie = new Movie(1, "Toy Story");
        this.size = size;
        this.type = type;
        initComponents();
        prepareTopic();
    }
    
    // Related video to movie
    public MovieTopicListPanel(Scroll type, Movie m) {
        this(type, m, 5);
    }
    
    public MovieTopicListPanel(Scroll type, Genre g) {
        this(type, g, 5);
    }
    
    public MovieTopicListPanel(Scroll type, String tag) {
        this(type, tag, 5);
    }
    
    public MovieTopicListPanel(Scroll type, Movie m, int size) {
        this.type = type;
        this.size = size;
        movie = m;
        initComponents();
        prepareTopic();
    }
    
    public MovieTopicListPanel(Scroll type, Genre g, int size) {
        this.type = type;
        this.size = size;
        genre = g;
        initComponents();
        prepareTopic();
    }
    
    public MovieTopicListPanel(Scroll type, String tag, int size) {
        this.type = type;
        this.tag = tag;
        this.size = size;
        initComponents();
        prepareTopic();
    }
    
    public MovieTopicListPanel(Scroll type, String tag, int size, boolean search ) {
        this.type = type;
//        this.tag = tag;
        this.size = size;
        this.search = tag ;
        System.out.println("aaaa");
        initComponents();
        prepareTopic();
    }
    
    public void prepareTopic()
    {
        if(movie != null)
            topicLabel.setText("Similar movies to " + movie.getTitle());
        else if(genre != null)
            topicLabel.setText("Genre: " + genre);
        
        else if(tag != null)
            topicLabel.setText("Tag: " + tag);
        else if(search != null)
            topicLabel.setText("Search for " + search);
        else
            topicLabel.setText("Top rated movies");
        
    }
    
    
    
    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(new Dimension(800, 600));
        MovieTopicListPanel movieListPanel = new MovieTopicListPanel();
        frame.setBackground(new Color(34, 34, 34));
        frame.add(movieListPanel);
        frame.setVisible(true);
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jComboBox1 = new javax.swing.JComboBox<>();
        crossIcon2 = new Icon.CrossIcon();
        jScrollPane1 = new javax.swing.JScrollPane();
        jSplitPane1 = new javax.swing.JSplitPane();
        controlePanel = new javax.swing.JPanel();
        topicLabel = new javax.swing.JLabel();
        searchField = new javax.swing.JTextField();
        searchIcon1 = new Icon.SearchIcon(searchField);
        movieScrollPanel1 = new Output.ScrollView.MovieScrollPanel(
            size, 6, type, (int start, int size)->{
                if(movie != null)
                {
                    return SearchMovies.genreMostMatch(movie.getId(), start, size);
                }
                else if(genre != null)
                {
                    return SearchMovies.searchByGenre(genre, start, size);
                }

                else if(tag != null)
                {
                    return SearchMovies.searchByTag(tag, start, size);
                }
                else if(search != null)
                return SearchMovies.searchByName(search, start, size);
                return SearchMovies.topRated(start, size);
            });

            jComboBox1.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Item 1", "Item 2", "Item 3", "Item 4" }));

            javax.swing.GroupLayout crossIcon2Layout = new javax.swing.GroupLayout(crossIcon2);
            crossIcon2.setLayout(crossIcon2Layout);
            crossIcon2Layout.setHorizontalGroup(
                crossIcon2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGap(0, 100, Short.MAX_VALUE)
            );
            crossIcon2Layout.setVerticalGroup(
                crossIcon2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGap(0, 100, Short.MAX_VALUE)
            );

            setBackground(new java.awt.Color(51, 51, 51));

            controlePanel.setBackground(new java.awt.Color(51, 51, 51));

            topicLabel.setFont(new java.awt.Font("Calibri", 0, 24)); // NOI18N
            topicLabel.setForeground(new java.awt.Color(255, 255, 255));
            topicLabel.setText("Topic");

            searchField.setBackground(new java.awt.Color(51, 51, 51));
            searchField.setFont(new java.awt.Font("Calibri", 0, 18)); // NOI18N
            searchField.setForeground(new java.awt.Color(255, 255, 255));
            searchField.setCursor(new java.awt.Cursor(java.awt.Cursor.TEXT_CURSOR));
            searchField.setOpaque(true);
            searchField.addActionListener(new java.awt.event.ActionListener() {
                public void actionPerformed(java.awt.event.ActionEvent evt) {
                    searchFieldActionPerformed(evt);
                }
            });

            javax.swing.GroupLayout searchIcon1Layout = new javax.swing.GroupLayout(searchIcon1);
            searchIcon1.setLayout(searchIcon1Layout);
            searchIcon1Layout.setHorizontalGroup(
                searchIcon1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGap(0, 100, Short.MAX_VALUE)
            );
            searchIcon1Layout.setVerticalGroup(
                searchIcon1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGap(0, 54, Short.MAX_VALUE)
            );

            javax.swing.GroupLayout controlePanelLayout = new javax.swing.GroupLayout(controlePanel);
            controlePanel.setLayout(controlePanelLayout);
            controlePanelLayout.setHorizontalGroup(
                controlePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(controlePanelLayout.createSequentialGroup()
                    .addContainerGap()
                    .addComponent(topicLabel, javax.swing.GroupLayout.DEFAULT_SIZE, 632, Short.MAX_VALUE)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addComponent(searchIcon1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addComponent(searchField, javax.swing.GroupLayout.PREFERRED_SIZE, 237, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addContainerGap())
            );
            controlePanelLayout.setVerticalGroup(
                controlePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(controlePanelLayout.createSequentialGroup()
                    .addContainerGap()
                    .addComponent(topicLabel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, controlePanelLayout.createSequentialGroup()
                    .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(searchField, javax.swing.GroupLayout.PREFERRED_SIZE, 42, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGap(18, 18, 18))
                .addGroup(controlePanelLayout.createSequentialGroup()
                    .addComponent(searchIcon1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGap(0, 0, Short.MAX_VALUE))
            );

            movieScrollPanel1.setBackground(new java.awt.Color(51, 51, 51));

            javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
            this.setLayout(layout);
            layout.setHorizontalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(movieScrollPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, 999, Short.MAX_VALUE)
                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                    .addContainerGap()
                    .addComponent(controlePanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
            );
            layout.setVerticalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                    .addContainerGap()
                    .addComponent(controlePanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addComponent(movieScrollPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, 421, Short.MAX_VALUE))
            );
        }// </editor-fold>//GEN-END:initComponents

    private void searchFieldActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_searchFieldActionPerformed
        if(MovieStackedPanel.STACK_PANEL != null)
        {
                MovieStackedPanel.STACK_PANEL.reset(new MovieTopicListPanel(Scroll.GRID, searchField.getText(), 22, true));
               searchField.setText("");
        }
    }//GEN-LAST:event_searchFieldActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JPanel controlePanel;
    private Icon.CrossIcon crossIcon2;
    private javax.swing.JComboBox<String> jComboBox1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JSplitPane jSplitPane1;
    private Output.ListView.ScrollView.MovieScrollPanel movieScrollPanel1;
    private javax.swing.JTextField searchField;
    private Icon.SearchIcon searchIcon1;
    private javax.swing.JLabel topicLabel;
    // End of variables declaration//GEN-END:variables
}
